FROM python:3.10
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1
WORKDIR /home/app
RUN groupadd -r djangoRUN && useradd --no-log-init -r -g djangoRUN djangoRUN
# Install requirements
COPY --chown=djangoRUN:djangoRUN ./backend/requirements.txt .
RUN pip install -r ./requirements.txt
# Entrypoint
COPY --chown=djangoRUN:djangoRUN ./backend/ .
COPY --chown=djangoRUN:djangoRUN ./deploy/entrypoint.sh /
RUN chmod +x /entrypoint.sh
USER djangoRUN
EXPOSE 8000
CMD /entrypoint.sh